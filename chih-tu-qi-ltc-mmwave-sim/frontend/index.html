<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mmWave 跌倒偵測系統 - 赤土崎多功能館</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>mmWave 跌倒偵測監控系統</h1>
                <span class="subtitle">赤土崎多功能館 1F 大廳</span>
            </div>
            <div class="header-right">
                <div class="connection-status" id="connectionStatus">
                    <span class="status-dot disconnected"></span>
                    <span class="status-text">連線中斷</span>
                </div>
                <div class="datetime" id="datetime"></div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel: Floor Plan -->
            <section class="floor-plan-section">
                <div class="panel-header">
                    <h2>樓層平面圖</h2>
                    <div class="legend">
                        <span class="legend-item"><span class="legend-dot normal"></span>正常</span>
                        <span class="legend-item"><span class="legend-dot warning"></span>警告</span>
                        <span class="legend-item"><span class="legend-dot fall"></span>跌倒</span>
                        <span class="legend-item"><span class="legend-dot radar"></span>雷達</span>
                    </div>
                </div>
                <div class="floor-plan" id="floorPlan">
                    <!-- Zones will be generated by JavaScript -->
                </div>
            </section>

            <!-- Right Panel: Status & Logs -->
            <aside class="side-panel">
                <!-- Radar Status -->
                <section class="radar-status-section">
                    <div class="panel-header">
                        <h2>雷達感測器狀態</h2>
                    </div>
                    <div class="radar-cards" id="radarCards">
                        <!-- Radar cards will be generated by JavaScript -->
                    </div>
                </section>

                <!-- Detection Gauges -->
                <section class="gauge-section">
                    <div class="panel-header">
                        <h2>偵測機率</h2>
                    </div>
                    <div class="gauges">
                        <div class="gauge-item">
                            <div class="gauge-label">正常活動</div>
                            <div class="gauge-bar">
                                <div class="gauge-fill normal" id="gaugeNormal" style="width: 85%"></div>
                            </div>
                            <div class="gauge-value" id="gaugeNormalValue">85%</div>
                        </div>
                        <div class="gauge-item">
                            <div class="gauge-label">跌倒風險</div>
                            <div class="gauge-bar">
                                <div class="gauge-fill warning" id="gaugeWarning" style="width: 10%"></div>
                            </div>
                            <div class="gauge-value" id="gaugeWarningValue">10%</div>
                        </div>
                        <div class="gauge-item">
                            <div class="gauge-label">跌倒偵測</div>
                            <div class="gauge-bar">
                                <div class="gauge-fill fall" id="gaugeFall" style="width: 5%"></div>
                            </div>
                            <div class="gauge-value" id="gaugeFallValue">5%</div>
                        </div>
                    </div>
                </section>

                <!-- Activity Log -->
                <section class="activity-log-section">
                    <div class="panel-header">
                        <h2>活動紀錄</h2>
                        <button class="clear-btn" id="clearLogBtn">清除</button>
                    </div>
                    <div class="activity-log" id="activityLog">
                        <!-- Log entries will be added by JavaScript -->
                    </div>
                </section>
            </aside>
        </main>

        <!-- Alert Modal -->
        <div class="alert-modal" id="alertModal">
            <div class="alert-content">
                <div class="alert-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                        <line x1="12" y1="9" x2="12" y2="13"/>
                        <line x1="12" y1="17" x2="12.01" y2="17"/>
                    </svg>
                </div>
                <h2>跌倒警報！</h2>
                <p id="alertMessage">偵測到跌倒事件</p>
                <div class="alert-details" id="alertDetails">
                    <p>區域：<span id="alertZone">-</span></p>
                    <p>時間：<span id="alertTime">-</span></p>
                    <p>機率：<span id="alertProbability">-</span></p>
                </div>
                <div class="alert-actions">
                    <button class="btn btn-primary" id="alertAckBtn">確認處理</button>
                    <button class="btn btn-secondary" id="alertDismissBtn">暫時忽略</button>
                </div>
            </div>
        </div>

        <!-- Statistics Bar -->
        <footer class="stats-bar">
            <div class="stat-item">
                <span class="stat-label">今日偵測次數</span>
                <span class="stat-value" id="statDetections">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">活躍區域</span>
                <span class="stat-value" id="statActiveZones">0/15</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">系統運行時間</span>
                <span class="stat-value" id="statUptime">00:00:00</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">最後更新</span>
                <span class="stat-value" id="statLastUpdate">-</span>
            </div>
        </footer>
    </div>

    <!-- Audio for alerts -->
    <audio id="alertSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2teleQAdp+f7uocPBHy74PeTRAACar7lz5VOAAB3y+f0oVgAAH3R7v6mYAAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAH/U7/+nYgAAf9Tv/6diAAB/1O//p2IAAA==" type="audio/wav">
    </audio>

    <script src="app.js"></script>
</body>
</html>
